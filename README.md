# diploma_project
Дипломный проект TF4 - Приложение для прокладывания маршрута с отбражением АЗС на пути следования.

Веб-приложение, прокладка и отображение на карте маршрута между несколькими точками с отображением АЗС с дизельным топливом по пути следования.
Чем больше точек, тем точнее построится маршрут. По умолчанию строится кратчайший маршрут по дорогам общего пользования.

Инструкция по запуску проекта:
- Скачать исходный код проекта на локальный компьютер (можно средствами git, или просто zip архив)
- Скачать и установить на компьютер docker-desktop по ссылке - https://www.docker.com/products/docker-desktop/
- Создать .env файл на основании .env.sample в папке с проектом
- Запустить docker-desktop через ярлык на рабочем столе
- Открыть консоль и перейти в папку с проектом. Или открыть папку с проектом, нажать правой клавишей на пустое место и выбрать пункт "Открыть в терминале"
- В терминале ввести команду docker-compose up --build -d и дождаться когда проект запуститься
- В приложении docker-desktop во вкладке containers дожен появиться контейнер diploma-project-main, если он зеленый и написано running, значит все хорошо
- Попробовать открыть в браузере страницу http://127.0.0.1:8000/
- Если все хорошо, откроется главная страница приложения и можно начинать работать
- При запуске создается суперпользователь с логином admin@admin.ru и паролем admin, можно использовать его чтобы войти в систему. Так же заполняется база данных данными из файла spisokAZS.

Адреса API:
- http://127.0.0.1:8000/users/api/register/ - регистрация на сайте POST 
- http://127.0.0.1:8000/users/api/token/ - получение токена для авторизации на сайте POST
- http://127.0.0.1:8000/users/api/token/refresh/ - обновление токена для авторизации POST
- http://127.0.0.1:8000/api/route/ - отображение списка маршрутов, созданных авторизованным пользователем GET
- http://127.0.0.1:8000/api/route/create/ - создание маршрута POST
- http://127.0.0.1:8000/api/route/update/<int:pk>/ - изменение маршрута c номером <int:pk>  PUT и PATCH
- http://127.0.0.1:8000/api/route/delete/<int:pk>/ - удаление маршрута c номером <int:pk>  DELETE
- http://127.0.0.1:8000/api/route/<int:pk>/ - отображение списка заправок на маршруте <int:pk> GET
- http://127.0.0.1:8000/api/point/create/ - создание точки с координатами POST
- http://127.0.0.1:8000/api/point/ - отображение списка точек созданных авторизованным пользователем GET


Для начала работы нужно отправить на адрес http://127.0.0.1:8000/users/api/token/ запрос с данными зарегистрированного пользователя {"email": email, "password": password}
Полученный access_token копировать и вставлять во все запросы. В postman есть вкладка Authorization. В левой графе в поле type нужно выбрать Bearer Token, в правой графе в поле скопировать полученный access_token. Это будет считаться авторизацией.

Технологии, используемые в проекте - django, djangorestframework, djangorestframework-simplejwt, OAuth2, Docker, OpenStreetMap, Project-OSRM.
